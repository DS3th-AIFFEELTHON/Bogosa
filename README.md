# ğŸ•µï¸ Bogosa
### [AIFFELthon DS 3ê¸°] ë³´ê³ ì‚¬: ê¸ˆìœµ ë³´ê³ ì„œ ê¸°ë°˜ VectorDB êµ¬ì¶• ë° RAG ìµœì í™”
- ê¸ˆìœµ ë³´ê³ ì„œ ê¸°ë°˜ ìµœì  VectorDB ìƒì„± & RAG ê¸°ë²• ìµœì í™” ë° ì‹ ë¢°ë„ ë†’ì€ ê¸ˆìœµ íŠ¹í™” LLM í™˜ê²½ êµ¬ì¶• Project

ğŸ“ ì‹œì—° ì˜ìƒ ì²¨ë¶€ ğŸ“

<br>
<br>

## íŒ€ì› ë° ì—­í• 
<table>
  <tr>
    <td>
        <a href="https://github.com/highlevelnotes">
         <img src="https://avatars.githubusercontent.com/u/124477843?v=4" width="150px" />  
        </a>
    </td>
    <td>
        <a href="https://github.com/hayannn">
         <img src="https://avatars.githubusercontent.com/u/102213509?v=4" width="150px" />  
        </a>
    </td>
    <td>
        <a href="https://github.com/gyumin-k">
         <img src="https://avatars.githubusercontent.com/u/61161614?v=4" width="150px" />  
        </a>
    </td>
  </tr>
  <tr>
    <td><p align="center"><b>ì´ì§€ìš°</b></p></td>
    <td><p align="center"><b>ì´í•˜ì–€</b></p></td>
    <td><p align="center"><b>ê¹€ê·œë¯¼</b></p></td>
  </tr>
  <tr>
    <td><p align="center"><a href="https://github.com/highlevelnotes">highlevelnotes</a></p></td>
    <td><p align="center"><a href="https://github.com/hayannn">hayannn</a></p></td>
    <td><p align="center"><a href="https://github.com/gyumin-k">gyumin-k</a></p></td>
  </tr>
  <tr>
    <td><p align="center">-</p></td>
    <td><p align="center"><a href="https://velog.io/@dlgkdis801">velog.io/@dlgkdis801</a></p></td>
    <td><p align="center">-</p></td>
  </tr>
  <tr>
    <td><p align="center">ì´ê´„, ê¸°íš</p></td>
    <td><p align="center">ê²€ì¦, ë°°í¬, ì§„í–‰ì‚¬í•­ ì •ë¦¬</p></td>
    <td><p align="center">ì„¤ê³„, í™•ì¥</p></td>
  </tr>
</table>



### ë™ì‹œ í…ŒìŠ¤íŠ¸ ì§„í–‰ ë° ì‘ì—… ìˆ˜í–‰
- RAG ì‹œìŠ¤í…œ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ ì‘ì—…ì„ ë™ì‹œì— ìˆ˜í–‰ + êµ¬ì¡° ë‚´ íŠ¹ì • ë¶€ë¶„ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ ë°©ì‹ìœ¼ë¡œ ì‘ì—…

<br>
<br>

## DataSet
### KIS Weekly Report
- ğŸ”— [KISìì‚°í‰ê°€/ìë£Œì‹¤/Weekly](https://www.bond.co.kr/post/10106/10254#none;)
- ë°œí–‰ ì£¼ê´€ : KIS ìì‚°í‰ê°€
- ë°œí–‰ ì£¼ê¸° : week
- í™œìš© ë²”ìœ„ : ì œ1090í˜¸ - ì œ1120í˜¸ (2024ë…„ 6ì›” 28ì¼ - 2025ë…„ 1ì›” 24ì¼)
- íŠ¹ì§• : Chart, Table, Textê°€ í˜¼í•©ëœ Multi Data í˜•íƒœ

<br>
<br>

## ê°œìš”
### 1. ë‹¤ì–‘í•œ ë§¤ì²´ë¥¼ í†µí•œ íˆ¬ì ì •ë³´ ìˆ˜ì§‘
- ì‹¤ì œ íˆ¬ì ìƒí™©ì— í™œìš©í• ë§Œí•œ ì‹ ë¢°ë„ ë¶€ì¡±
- ë§¤ì¼ ìŸì•„ì§€ëŠ” Report, ì¬ë¬´ì œí‘œ, ê¸°ì‚¬ì— ëŒ€í•œ ë¶„ì„ ì‹œê°„ ë° ë¹„ìš© ë¹„íš¨ìœ¨ ë°œìƒ
#### â¡ï¸ LLM(Large Language Model) í™œìš©

<br>

### 2. ê¸°ì¡´ LLMì˜ ë¬¸ì œì 
-  Perplexity, Tavily ë“±ì˜ ê²€ìƒ‰ ê¸°ëŠ¥ì´ íƒ‘ì¬ëœ LLMì„ í™œìš©í•˜ë©´ ë¹ ë¥¸ ì •ë³´ ìˆ˜ì§‘ ê°€ëŠ¥
-  ê·¸ëŸ¬ë‚˜ ë‹¤ìŒì˜ ë¬¸ì œì  ë°œìƒ
  - ì •ë³´ ì‹ ë¢°ì„±
  - ì‚¬ìš©ìì—ê²Œ fití•œ Reportì¸ì§€ ì—¬ë¶€
  - Report ë‚´ìš© ì •í™•ì„±
  - ì›í•˜ëŠ” ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ì ì ˆí•œ LLM í™œìš© í•„ìš”
#### â¡ï¸ ì±„ê¶Œ ì‹œì¥ ë¦¬í¬íŠ¸ ìˆ˜ì¹˜ ë°ì´í„°ì˜ íš¨ìœ¨ì  ìš”ì•½ ë° ë¶„ì„ ëŒ€í™”í˜• ì±—ë´‡ ì œì‘ì˜ í•„ìš”ì„±

<br>

### 3. ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ ê³ ë ¤í•œ Archtecture êµ¬ì¶• ë° ì‹¤í—˜
- í™•ì¥ ê°€ëŠ¥ì„± ê³ ë ¤ : ì¶”í›„ ë” ë§ì€ Reportê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ë¬¸ì œ ì—†ì´ ì •ë³´ ì œê³µ
- Focus : ì•„í‚¤í…ì³ì— ì§‘ì¤‘
  - ì˜ëª»ëœ ì •ë³´ ì „ë‹¬ ëŒ€ì‹  -> "ëª¨ë¥¸ë‹¤"ëŠ” ë‹µë³€ì´ ì‹ ë¢°ë„ì— ë„ì›€ì´ ë  ê²ƒ
  - ë‹µë³€ ì¶œë ¥ í˜•ì‹, ì‹œìŠ¤í…œ ì†ë„ ë¬¸ì œë³´ë‹¤ -> ì‹ ë¢°ë„ê°€ ì•„ì£¼ ì¤‘ìš”
#### â¡ï¸ ì–´ë–»ê²Œ í•˜ë©´ ì •í™•í•œ ë°ì´í„°ë§Œ ì œê³µí•˜ëŠ” RAG ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ”ê°€ì— ëŒ€í•œ ë¶€ë¶„ì´ ì£¼ìš” Task

<br>
<br>

## í”„ë¡œì íŠ¸ ìˆ˜í–‰
### 1. Parsing
- LangGraph ë° Upstage Layout Analyzerë¥¼ í†µí•œ ìš”ì†Œë³„ ë°ì´í„°ë¥¼ ì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì¶œ
- Text
  - Rule-Basedë¡œ ì „ì²˜ë¦¬
- Table
  - Llama Parserë¥¼ ì´ìš©í•´ Markdown í˜•íƒœë¡œ ì¶”ì¶œ
- Chart
  - OCRì„ ì´ìš©í•´ ë‚´ìš© ì¶”ì¶œ

<br>

### 2. VectorDB
- Structure
  - [ATTU](https://github.com/zilliztech/attu) í™œìš©
  - Text, Table, Raptor, Imageë¡œ êµ¬ì„±
  - Index Type & Metric Type : AUTOINDEX - IP

<br>

### 3. í‰ê°€ ë°©ë²•
- AutoRAGë¥¼ ì´ìš©í•œ QA Set ìƒì„±
- RAGAS í‰ê°€ ì§€í‘œ 4ê°€ì§€ í™œìš© : `Context Recall`, `Context Precision`, `Answer Similarity`, `Answer Correctness`

<br>

### 4. Embedding
- Upstage Solar Embedding ë° [bge-m3](https://huggingface.co/BAAI/bge-m3) ì´ìš©

<br>

### 5. Chunking
- Sementic Chunker ì‚¬ìš©
  - parameter : Percentile 80% based breakpoint

<br>

### 6. ë‚ ì§œ ì²˜ë¦¬
- Milvus ë©”íƒ€ë°ì´í„° í•„í„°ë§ ê¸°ëŠ¥ ì‚¬ìš©: User Queryì—ì„œ ì •í™•í•œ ë‚ ì§œ ë²”ìœ„ ì¶”ì¶œ

<br>

### 7. Retriever
- Text : Milvus Retriever(textDB) + LLMReranking
- Table : Milvus Retriever(tableDB) + KiwiBM25Retriever(table)
- Raptor(date) : Milvus Retriever(raptorDB)
- Raptor(number) : Self Query Retriever(raptorDB)
- Image : Milvus Retriever(imageDB)

<br>

### 8. ë¬¸ì„œ ìš”ì•½
- Raptor ë°©ë²•ë¡ ì„ ì´ìš©í•œ ìš”ì•½ Vector ìƒì„± ë° ë³„ë„ Collectionìœ¼ë¡œ ì €ì¥í•˜ì—¬ ì‚¬ìš©
- ë…¼ë¬¸ ì°¸ê³  : [RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval](https://arxiv.org/html/2401.18059v1)
- í˜¸ìˆ˜ì™€ ê´€ë ¨ëœ ì§ˆë¬¸ì€ SelfQuery, ë‚ ì§œì™€ ê´€ë ¨ëœ ì§ˆë¬¸ì€ ì¼ë°˜ Milvus Retrieverë¡œ ê²€ìƒ‰ ìˆ˜í–‰

<br>

### 9. Query Routing


<br>
<br>

## ë””ë ‰í„°ë¦¬ êµ¬ì¡°
```
â”œâ”€â”€ ğŸ“‘ README.md
â”œâ”€â”€ ğŸ“‘                         # 
â”œâ”€â”€ ğŸ“‘                         # 
â”œâ”€â”€ ğŸ—‚ï¸                         # 
|   â”œâ”€â”€                        # 
|   â””â”€â”€                        # 
|
â”œâ”€â”€ ğŸ“‘                          # 
â””â”€â”€ ğŸ“‘                          # 
```

<br>
<br>

## ê¸°ìˆ  ìŠ¤íƒ
> ### Language
- Python `3.11`

<br>

> ### Format
- JSON
- JSONLines
- CSV

<br>

> ### API & Cloud
- OpenAI `1.61.1`
- Upstage `0.4.0`
- HuggingFace 
- GCP(Google Cloud Platform)

<br>

> ### RAG
- LangChain `0.3.19`
- RAGAS `0.1.21`
- AutoRAG `0.3.13`

<br>

> ### VectorDB & Embedding
- Milvus
  - langchain_milvus
  - langchain_community.vectorstores
- Embeddings
  - UpstageEmbeddings
  - OpenAIEmbeddings
  - HuggingFaceEmbeddings

<br>

> ### Library
- LangChain
  - community `0.3.18`
  - openai `0.2.14`
  - core `0.3.40`
  - experimental `0.3.4`
  - upstage `0.4.0`
  - milvus `0.1.8`

<br>
<br>

## í”„ë¡œì íŠ¸ ì¼ì •
![Image](https://github.com/user-attachments/assets/7c86ddc6-42c8-4983-8e81-5d5ac21a3953)

<br>
<br>

## ì°¸ê³  ë¬¸ì„œ ë° ì½”ë“œ ì°¸ê³ 
