# ğŸ•µï¸ Bogosa
### [AIFFELthon DS 3ê¸°] ë³´ê³ ì‚¬: ì±„ê¶Œ ë¦¬í¬íŠ¸ ê¸°ë°˜ VectorDB êµ¬ì¶• ë° RAG ìµœì í™”
- ê¸ˆìœµ ë³´ê³ ì„œ ê¸°ë°˜ ìµœì  VectorDB ìƒì„± & RAG ê¸°ë²• ìµœì í™” ë° ì‹ ë¢°ë„ ë†’ì€ ê¸ˆìœµ íŠ¹í™” LLM í™˜ê²½ êµ¬ì¶• Project
- [NotionPage/ë³´ê³ ì‚¬](https://hayanlee.notion.site/1c4022a887d980658b1cfafc1f23936a?pvs=4)

![Image](https://github.com/user-attachments/assets/f77f4762-4e6f-47ee-ad62-d60a2dc08621)

<br>
<br>

## íŒ€ì› ë° ì—­í• 
<table>
  <tr>
    <td>
        <a href="https://github.com/highlevelnotes">
         <img src="https://avatars.githubusercontent.com/u/124477843?v=4" width="150px" />  
        </a>
    </td>
    <td>
        <a href="https://github.com/hayannn">
         <img src="https://avatars.githubusercontent.com/u/102213509?v=4" width="150px" />  
        </a>
    </td>
    <td>
        <a href="https://github.com/gyumin-k">
         <img src="https://avatars.githubusercontent.com/u/61161614?v=4" width="150px" />  
        </a>
    </td>
  </tr>
  <tr>
    <td><p align="center"><b>ì´ì§€ìš°</b></p></td>
    <td><p align="center"><b>ì´í•˜ì–€</b></p></td>
    <td><p align="center"><b>ê¹€ê·œë¯¼</b></p></td>
  </tr>
  <tr>
    <td><p align="center"><a href="https://github.com/highlevelnotes">highlevelnotes</a></p></td>
    <td><p align="center"><a href="https://github.com/hayannn">hayannn</a></p></td>
    <td><p align="center"><a href="https://github.com/gyumin-k">gyumin-k</a></p></td>
  </tr>
  <tr>
    <td><p align="center">-</p></td>
    <td><p align="center"><a href="https://velog.io/@dlgkdis801">velog.io/@dlgkdis801</a></p></td>
    <td><p align="center">-</p></td>
  </tr>
  <tr>
    <td><p align="center">ì´ê´„, ê¸°íš</p></td>
    <td><p align="center">ê²€ì¦, ë°°í¬, ì§„í–‰ì‚¬í•­ ì •ë¦¬</p></td>
    <td><p align="center">ì„¤ê³„, í™•ì¥</p></td>
  </tr>
</table>



### ë™ì‹œ í…ŒìŠ¤íŠ¸ ì§„í–‰ ë° ì‘ì—… ìˆ˜í–‰
- RAG ì‹œìŠ¤í…œ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ ì‘ì—…ì„ ë™ì‹œì— ìˆ˜í–‰ + êµ¬ì¡° ë‚´ íŠ¹ì • ë¶€ë¶„ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ ë°©ì‹ìœ¼ë¡œ ì‘ì—…

<br>
<br>

## DataSet
### KIS Weekly Report
- ğŸ”— [KISìì‚°í‰ê°€/ìë£Œì‹¤/Weekly](https://www.bond.co.kr/post/10106/10254#none;)
- ë°œí–‰ ì£¼ê´€ : KIS ìì‚°í‰ê°€
- ë°œí–‰ ì£¼ê¸° : week
- í™œìš© ë²”ìœ„ : ì œ1090í˜¸ - ì œ1120í˜¸ (2024ë…„ 6ì›” 28ì¼ - 2025ë…„ 1ì›” 24ì¼)
- íŠ¹ì§• : Chart, Table, Textê°€ í˜¼í•©ëœ Multi Data í˜•íƒœ

<br>
<br>

## ê°œìš”
### 1. ë‹¤ì–‘í•œ ë§¤ì²´ë¥¼ í†µí•œ íˆ¬ì ì •ë³´ ìˆ˜ì§‘
- ì‹¤ì œ íˆ¬ì ìƒí™©ì— í™œìš©í• ë§Œí•œ ì‹ ë¢°ë„ ë¶€ì¡±
- ë§¤ì¼ ìŸì•„ì§€ëŠ” Report, ì¬ë¬´ì œí‘œ, ê¸°ì‚¬ì— ëŒ€í•œ ë¶„ì„ ì‹œê°„ ë° ë¹„ìš© ë¹„íš¨ìœ¨ ë°œìƒ
#### â¡ï¸ LLM(Large Language Model) í™œìš©

<br>

### 2. ê¸°ì¡´ LLMì˜ ë¬¸ì œì 
-  Perplexity, Tavily ë“±ì˜ ê²€ìƒ‰ ê¸°ëŠ¥ì´ íƒ‘ì¬ëœ LLMì„ í™œìš©í•˜ë©´ ë¹ ë¥¸ ì •ë³´ ìˆ˜ì§‘ ê°€ëŠ¥
-  ê·¸ëŸ¬ë‚˜ ë‹¤ìŒì˜ ë¬¸ì œì  ë°œìƒ
  - ì •ë³´ ì‹ ë¢°ì„±
  - ì‚¬ìš©ìì—ê²Œ fití•œ Reportì¸ì§€ ì—¬ë¶€
  - Report ë‚´ìš© ì •í™•ì„±
  - ì›í•˜ëŠ” ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ì ì ˆí•œ LLM í™œìš© í•„ìš”
#### â¡ï¸ ì±„ê¶Œ ì‹œì¥ ë¦¬í¬íŠ¸ ìˆ˜ì¹˜ ë°ì´í„°ì˜ íš¨ìœ¨ì  ìš”ì•½ ë° ë¶„ì„ ëŒ€í™”í˜• ì±—ë´‡ ì œì‘ì˜ í•„ìš”ì„±

<br>

### 3. ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ ê³ ë ¤í•œ Archtecture êµ¬ì¶• ë° ì‹¤í—˜
- í™•ì¥ ê°€ëŠ¥ì„± ê³ ë ¤ : ì¶”í›„ ë” ë§ì€ Reportê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ë¬¸ì œ ì—†ì´ ì •ë³´ ì œê³µ
- Focus : ì•„í‚¤í…ì³ì— ì§‘ì¤‘
  - ì˜ëª»ëœ ì •ë³´ ì „ë‹¬ ëŒ€ì‹  -> "ëª¨ë¥¸ë‹¤"ëŠ” ë‹µë³€ì´ ì‹ ë¢°ë„ì— ë„ì›€ì´ ë  ê²ƒ
  - ë‹µë³€ ì¶œë ¥ í˜•ì‹, ì‹œìŠ¤í…œ ì†ë„ ë¬¸ì œë³´ë‹¤ -> ì‹ ë¢°ë„ê°€ ì•„ì£¼ ì¤‘ìš”
#### â¡ï¸ ì–´ë–»ê²Œ í•˜ë©´ ì •í™•í•œ ë°ì´í„°ë§Œ ì œê³µí•˜ëŠ” RAG ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ”ê°€ì— ëŒ€í•œ ë¶€ë¶„ì´ ì£¼ìš” Task

<br>
<br>

## ë””ë ‰í„°ë¦¬ êµ¬ì¡°
```
â”œâ”€â”€ ğŸ“‘ README.md
â”œâ”€â”€ ğŸ“‘ requirements.txt                  # ì„¤ì¹˜ íŒŒì¼
|
â”œâ”€â”€ ğŸ—‚ï¸ docs                              # í”„ë¡œì íŠ¸ ë¡œê·¸ ë° ì „ë°˜ ë‚´ìš© ì‘ì„±
|   â”œâ”€â”€ ğŸ“‘ ì•„ì´í í†¤_ìµœì¢…ë°œí‘œìë£Œ_ë³´ê³ ì‚¬.pdf
|   â”œâ”€â”€ ğŸ“‘ í”„ë¡œì íŠ¸ ê³„íšì„œ
|   â””â”€â”€ ğŸ”— NotionPage/ë³´ê³ ì‚¬
|
â”œâ”€â”€ ğŸ—‚ï¸ bogosa                            
|   â”œâ”€â”€ ğŸ“‘ 250321_LCEL.ipynb             # ë©”ì¸ íŒŒì¼
|   â”œâ”€â”€ ğŸ—‚ï¸ QA                            # QAì…‹
|   â”œâ”€â”€ ğŸ—‚ï¸ raptor                        # raptor ì•Œê³ ë¦¬ì¦˜ ì ìš© jsonl íŒŒì¼
|   â””â”€â”€ ğŸ—‚ï¸ chunked_jsonl                 # ì²­í‚¹ ì™„ë£Œëœ jsonl íŒŒì¼
|
â”œâ”€â”€ ğŸ—‚ï¸ evaluation
|   â”œâ”€â”€ ğŸ—‚ï¸ AutoRAG                       # AutoRAG í™œìš© QA ë°ì´í„°ì…‹ ìƒì„± ì‹¤í–‰ íŒŒì¼
|   â””â”€â”€ ğŸ—‚ï¸ RAGAS                         # RAGAS ëª¨ë“ˆ ê´€ë ¨ ì •ë¦¬
|       â”œâ”€â”€ ğŸ—‚ï¸ score                     # DBë³„ ì„±ëŠ¥ ì§€í‘œ
|       â””â”€â”€ ğŸ—‚ï¸ test_notebook             # ì„±ëŠ¥ í‰ê°€ ipynb íŒŒì¼
|
â”œâ”€â”€ ğŸ—‚ï¸ streamlit                         # streamlit ê´€ë ¨ ì •ë¦¬
|   â”œâ”€â”€ ğŸ“‘ streamlit.py                  # UI
|   â””â”€â”€ ğŸ“‘ financial_qa.py               # Code
|
â””â”€â”€ ğŸ—‚ï¸ pipeline                          # íŒŒì´í”„ë¼ì¸
     â”œâ”€â”€ ğŸ—‚ï¸ text                         # í…ìŠ¤íŠ¸ íŒŒì´í”„ë¼ì¸
     â””â”€â”€ ğŸ—‚ï¸ Airflow                      # Airflow DAG
```

<br>
<br>

## ê¸°ìˆ  ìŠ¤íƒ
> ### Language
- Python `3.11`

<br>

> ### Format
- JSON
- JSONLines
- CSV

<br>

> ### API & Cloud
- OpenAI `1.61.1`
- Upstage `0.4.0`
- HuggingFace 
- GCP(Google Cloud Platform)

<br>

> ### RAG
- LangChain `0.3.19`
- LangGraph `0.2.74`
- RAGAS `0.1.21`
- AutoRAG `0.3.13`

<br>

> ### VectorDB & Embedding
- Milvus
  - langchain_milvus
  - langchain_community.vectorstores
- Embeddings
  - UpstageEmbeddings
  - OpenAIEmbeddings
  - HuggingFaceEmbeddings

<br>

> ### Library
- LangChain
  - community `0.3.18`
  - openai `0.2.14`
  - core `0.3.40`
  - experimental `0.3.4`
  - upstage `0.4.0`
  - milvus `0.1.8`

<br>
<br>

## í”„ë¡œì íŠ¸ ì¼ì •
![Image](https://github.com/user-attachments/assets/7c86ddc6-42c8-4983-8e81-5d5ac21a3953)

<br>
<br>

## í”„ë¡œì íŠ¸ ìˆ˜í–‰
### 1. Parsing
- LangGraph ë° Upstage Layout Analyzerë¥¼ í†µí•œ ìš”ì†Œë³„ ë°ì´í„°ë¥¼ ì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì¶œ
- Text
  - Rule-Basedë¡œ ì „ì²˜ë¦¬
- Table
  - Llama Parserë¥¼ ì´ìš©í•´ Markdown í˜•íƒœë¡œ ì¶”ì¶œ
- Chart
  - OCRì„ ì´ìš©í•´ ë‚´ìš© ì¶”ì¶œ

<br>

### 2. VectorDB
- Structure
  - [ATTU](https://github.com/zilliztech/attu) í™œìš©
  - Text, Table, Raptor, Imageë¡œ êµ¬ì„±
  - Index Type & Metric Type : AUTOINDEX - IP

<br>

### 3. í‰ê°€ ë°©ë²•
- AutoRAGë¥¼ ì´ìš©í•œ QA Set ìƒì„±
- RAGAS í‰ê°€ ì§€í‘œ 4ê°€ì§€ í™œìš© : `Context Recall`, `Context Precision`, `Answer Similarity`, `Answer Correctness`

<br>

### 4. Embedding
- Upstage Solar Embedding ë° [bge-m3](https://huggingface.co/BAAI/bge-m3) ì´ìš©

<br>

### 5. Chunking
- Sementic Chunker ì‚¬ìš©
  - parameter : Percentile 80% based breakpoint

<br>

### 6. ë‚ ì§œ ì²˜ë¦¬
- Milvus ë©”íƒ€ë°ì´í„° í•„í„°ë§ ê¸°ëŠ¥ ì‚¬ìš©: User Queryì—ì„œ ì •í™•í•œ ë‚ ì§œ ë²”ìœ„ ì¶”ì¶œ

<br>

### 7. Retriever
- Text : Milvus Retriever(textDB) + LLMReranking
- Table : Milvus Retriever(tableDB) + KiwiBM25Retriever(table)
- Raptor(date) : Milvus Retriever(raptorDB)
- Raptor(number) : Self Query Retriever(raptorDB)
- Image : Milvus Retriever(imageDB)

<br>

### 8. ë¬¸ì„œ ìš”ì•½
- Raptor ë°©ë²•ë¡ ì„ ì´ìš©í•œ ìš”ì•½ Vector ìƒì„± ë° ë³„ë„ Collectionìœ¼ë¡œ ì €ì¥í•˜ì—¬ ì‚¬ìš©
- ë…¼ë¬¸ ì°¸ê³  : [RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval](https://arxiv.org/html/2401.18059v1)
- í˜¸ìˆ˜ì™€ ê´€ë ¨ëœ ì§ˆë¬¸ì€ SelfQuery, ë‚ ì§œì™€ ê´€ë ¨ëœ ì§ˆë¬¸ì€ ì¼ë°˜ Milvus Retrieverë¡œ ê²€ìƒ‰ ìˆ˜í–‰

<br>

### 9. Query Routing
- ì§ˆë¬¸ ìœ í˜•ì— ë”°ë¥¸ ìµœì í™”ëœ ë‹µë³€ ì œê³µì„ ìœ„í•´ ì‚¬ìš©
- ì§ˆë¬¸ ì…ë ¥ â¡ï¸ ë‚ ì§œ ê´€ë ¨ ì§ˆë¬¸, íŠ¹ì • í˜¸ìˆ˜ ì§ˆë¬¸, ë²”ìš© ì§ˆë¬¸ì¸ì§€ íŒë‹¨
  - ë‚ ì§œ ê´€ë ¨ ì§ˆë¬¸ : ìš”ì•½, ì˜ˆì¸¡, ì¼ë°˜ ì§ˆë¬¸ì¸ì§€ë¥¼ ì¶”ê°€ë¡œ êµ¬ë¶„
- ê° ì§ˆë¬¸ì— ìµœì  í”„ë¡¬í”„íŠ¸ ë° ì²´ì¸ì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±

<br>

### 10. Chart
- ì´ë¯¸ì§€ì—ì„œ ì§ì ‘ì  ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì€ ìœ„í—˜ì„± ì¡´ì¬ â¡ï¸ ì°¸ê³  ìë£Œë¡œ í™œìš©
- RAG ì²´ì¸ì„ í†µí•´ ì–»ì€ ë‹µë³€ + image vectorstoreì—ì„œ ê²€ìƒ‰ëœ ì´ë¯¸ì§€ ìš”ì•½ â¡ï¸ Groundedness Checkerë¡œ ê²€ì¦

<br>
<br>


## RAG Architecture
![Image](https://github.com/user-attachments/assets/6c146da3-ec08-479f-b328-05001c41b698)
![Image](https://github.com/user-attachments/assets/ea56c403-18ae-405d-aa5c-f2467d3b3a58)

<br>
<br>

## ê²€ìƒ‰ ìˆ˜í–‰ ê²°ê³¼
> ### ğŸ“ ì‹œì—° ì˜ìƒ
> [![Video Label](http://img.youtube.com/vi/kbU95wzck3s/0.jpg)](https://youtu.be/kbU95wzck3s)

<br>

### ğŸ’¬ "2ì£¼ì „ ì€í–‰ì±„ ë°œí–‰ì•¡ì€?" <br>
![Image](https://github.com/user-attachments/assets/2fb82ddf-7ffb-4205-9d47-b8cb78391b42)

<br>

### ğŸ’¬ "2025ë…„ 1ì›” 24ì¼ê³¼ 2025ë…„ 1ì›” 17ì¼ì˜ êµ­ê³µì±„ ì‹œì¥ ë™í–¥ì„ ë¹„êµí•˜ì‹œì˜¤." <br>
![Image](https://github.com/user-attachments/assets/0488645a-7bf5-4d22-ba0c-ca64e2f8510d)

<br>

### ğŸ’¬ "ì§€ë‚œ ë‹¬ ì€í–‰ì±„ ë°œí–‰ì•¡ ì´ì•¡ì€?" <br>
![Image](https://github.com/user-attachments/assets/32eb0665-5a87-4e50-a60a-f1082805b160)

- ì‹¤ì œ 12ì›” 1 - 4ì£¼ì°¨ ì€í–‰ì±„ ë°œí–‰ì•¡ ì •ë³´ <br>
![Image](https://github.com/user-attachments/assets/874940de-357f-4ea1-895f-72aa83bdc4bf)

<br>

### "ğŸ’¬ 1101í˜¸ ìš”ì•½í•´ì¤˜." <br>
![Image](https://github.com/user-attachments/assets/81d0e217-7f84-4de7-bb3d-a016313330af)

<br>

### ğŸ’¬ "ë‹¤ìŒë‹¬ íšŒì‚¬ì±„ ì‹œì¥ê³¼ ìŠ¤í”„ë ˆë“œ ì „ë§ ì•Œë ¤ì¤˜." <br>
![Image](https://github.com/user-attachments/assets/24df717f-cda2-48fd-a7fa-816d48031316)

<br>
<br>

## ì°¸ê³  ë¬¸ì„œ ë° ì½”ë“œ ì°¸ê³ 
- ì°¸ê³ 
  - [<ë­ì²´ì¸LangChain ë…¸íŠ¸> - LangChain í•œêµ­ì–´ íŠœí† ë¦¬ì–¼ğŸ‡°ğŸ‡·](https://wikidocs.net/233341)
  - [ì´í† ë¡ ì‰¬ìš´ RAG ì‹œìŠ¤í…œ êµ¬ì¶•ì„ ìœ„í•œ ë­ì²´ì¸ ì‹¤ì „ ê°€ì´ë“œ](https://www.yes24.com/product/goods/136548871)
  - [AutoRAG íŠœí† ë¦¬ì–¼](https://www.youtube.com/playlist?list=PLIMb_GuNnFwdjfLUPrpUAzjQLfBJLQ7MC)
  - [LoRAì˜ ê°œë…](https://www.youtube.com/watch?v=0lf3CUlUQtA)
  - [BigQuery RAG íŒŒì´í”„ë¼ì¸(Document AI Layout Parser)](https://cloud.google.com/blog/ko/products/data-analytics/bigquery-and-document-ai-layout-parser-for-document-preprocessing)

- Milvus
  - [milvus ë©”íƒ€ë°ì´í„° í•„í„°ë§](https://milvus.io/docs/ko/filtered-search.md)
  - [Efficiently Deploying Milvus on GCP Kubernetes: A Guide to Open Source Database Management](https://medium.com/@zilliz_learn/efficiently-deploying-milvus-on-gcp-kubernetes-a-guide-to-open-source-database-management-7e49d0b194d8)
  - [Command line tool (kubectl)](https://kubernetes.io/docs/reference/kubectl/)
  - [Kubernetes CLI ë„êµ¬ì¸ kubectlì˜ ì‚¬ìš©ë²• ì´í•´í•˜ê¸°](https://velog.io/@pinion7/kubernetes-CLI-%EB%8F%84%EA%B5%AC%EC%9D%B8-kubectl%EC%9D%98-%EC%82%AC%EC%9A%A9%EB%B2%95-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)
  - [GKEì— Milvus í´ëŸ¬ìŠ¤í„° ë°°í¬í•˜ê¸°](https://milvus.io/docs/ko/gcp.md)

<br>

- ë…¼ë¬¸
  - [AutoRAGë¥¼ ì´ìš©í•œ ê¸ˆìœµ ë¬¸ì„œì— ê°€ì¥ ìµœì í™”ëœ RAG ì‹œìŠ¤í…œ êµ¬í˜„ì— ê´€í•œ ì—°êµ¬](https://koreascience.or.kr/article/CFKO202433162114304.pdf)
  - [Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks](https://arxiv.org/pdf/2005.11401)
  - [RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval](https://arxiv.org/html/2401.18059v1)

<br>

- ê³µì‹ë¬¸ì„œ
  - [AutoRAG í‰ê°€ ì§€í‘œ](https://docs.auto-rag.com/evaluate_metrics/retrieval.html)

<br>

- ì‚¬ë¡€
  - [ì‹ í•œíˆ¬ìì¦ê¶Œ X ìŠ¤ì¼ˆí„°ë©ìŠ¤ :: ì¦ê¶Œì‚¬ RAG í™œìš© ì‚¬ë¡€](https://www.skelterlabs.com/blog/rag-securities)
  - [ê¸°ì—…ìš© ê¸ˆìœµ íŠ¹í™” LLM ëª¨ë¸ ë§Œë“¤ê¸° (1)- í•„ìš”ì„±ê³¼ RAG](https://blog-ko.allganize.ai/alli-finance-llm-1/)

<br>

- Model
  - [mteb_ko_leaderboard(ì˜¤í”ˆì†ŒìŠ¤ ì„ë² ë”© ëª¨ë¸)](https://github.com/su-park/mteb_ko_leaderboard)
